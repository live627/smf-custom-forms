## Tutorial: Using the Custom Form Template Functions

This tutorial explains how to use the provided template functions to build and display a custom form tailored to your needs.

The Custom Form Mod allows you to create a unique template function for each form, offering flexibility and control over its layout and behavior.

---

### **Getting Started: Creating a Custom Template**
To create a new template function:

1. Navigate to `./Themes/default/`.
2. Duplicate the `template_form()` function in the `CustomFormUserland.template.php` file.
   - If this file does not exist, duplicate `CustomForm.template.php` and rename it to `CustomFormUserland.template.php`.
3. Name your new function following the format:  
   `template_form_{CustomTemplateName}`  
   Example: `template_form_my_custom_template`
4. In the form configuration, assign `{CustomTemplateName}` to the **Custom Template Function** setting.

---

### **Overview of Template Functions**

The provided functions help you structure and manage your form dynamically:

1. **`template_form_above`**: Outputs the opening structure of the form, including headers and styles.
2. **`template_form`**: Dynamically renders fields and error messages based on the `$context['fields']` configuration.
3. **`template_form_below`**: Finalizes the form, adding hidden fields and a submit button.

---

### **Understanding the `$context` Array**

The `$context` array defines your form's structure and behavior. Here's a sample configuration to guide you:

```php

// Title of your form
$context['page_title'] = 'Custom Form';

// Generated by SMF
$context['character_set'] = 'UTF-8';
$context['session_var'] = 'session_var';
$context['session_id'] = 'abc123';

// Unique numeric form identifier
$context['form_id'] = '1';
$context['require_verification'] = false;
$context['failed_form_submit'] = false;

// The main attraction: form fields
$context['fields'] = [
    'username' => [
        'text' => 'Username',
        'type' => 'text',
            'html' => '<input type="text" name="username" required>',
            'required' => true,
            'failed' => false,
        ],
        'email' => [
            'text' => 'Email Address',
            'type' => 'email',
            'html' => '<input type="email" name="email" required>',
            'required' => true,
            'failed' => false,
        ],
        'accept_terms' => [
            'text' => 'Accept Terms and Conditions',
            'type' => 'checkbox',
            'html' => '<input type="checkbox" name="accept_terms">',
            'required' => true,
        'failed' => false,
    ],
];
```

---

### **Detailed Function Breakdown**

#### **1. `template_form_above`**
This function outputs the opening `<form>` tag and associated styles.

**Purpose**:
- Use `$context['character_set']` for form encoding.
- Dynamically set the formâ€™s `action` using `$scripturl`.

**Example Output**:
```html
<form action="http://example.com?action=form" method="post" accept-charset="UTF-8" enctype="multipart/form-data">
    <div class="cat_bar">
        <h3 class="catbg">Custom Form</h3>
    </div>
    <div class="roundframe noup">
```

---

#### **2. `template_form`**
This function dynamically renders fields based on `$context['fields']`.

**Features**:
- Supports multiple input types (e.g., `text`, `checkbox`).
- Highlights validation errors for failed fields.
- Marks required fields with `*`.

**Example Output**:
```html
<label for="username">* Username</label>
<input type="text" name="username" required>

<label for="email">* Email Address</label>
<input type="email" name="email" required>

<label for="accept_terms">* Accept Terms and Conditions</label>
<input type="checkbox" name="accept_terms">
```

---

#### **3. `template_form_below`**
This function completes the form with hidden fields and a submit button.

**Purpose**:
- Includes a hidden input for session validation.
- Renders a submit button using `$txt['customform_submit']`.

**Example Output**:
```html
<input type="hidden" name="session_var" value="abc123">
<input name="n" value="custom_form_1" type="hidden">
<div class="righttext breaker">
    <input name="submit" value="Submit" class="button" type="submit">
</div>
</form>
```

---

### **Customizing the Template**

To create a unique layout or functionality:

1. Duplicate `template_form()` into a new function like this:
```php
function template_form_my_custom_template(): void
{
    global $context;

    echo '<h3>My Custom Form</h3>';
    foreach ($context['fields'] as $field_name => $field_data) {
        echo '<label>', $field_data['text'], '</label>';
        echo $field_data['html'];
    }
}
```

2. Update the form configuration: Set **Custom Template Function** to `form_my_custom_template`.

---

### **Optional: Adding Template Layers**

Template layers allow for additional customizations by wrapping sub-templates around the main content.

```php
function template_form_my_custom_template_above(): void
{
    global $context, $scripturl;

    echo '
    <form action="', $scripturl, '?action=form" method="post" accept-charset="', $context['character_set'], '" enctype="multipart/form-data">
        <h3>', $context['page_title'], '</h3>';
}
function template_form_my_custom_template_below(): void
{
    global $context, $txt;

    echo '
        <input type="hidden" name="', $context['session_var'], '" value="', $context['session_id'], '" />
        <input type="submit" value="', $txt['customform_submit'], '" />
    </form>';
}
```

Updated execution order:  
1. **`template_form_my_custom_template_above`**  
2. **`template_form_my_custom_template`**  
3. **`template_form_my_custom_template_below`**

---

### **Testing Your Template**

After creating your custom template, ensure:
- Fields render as expected.
- Validation and error handling work.
- Session variables are correctly passed.

Follow these steps to achieve a robust, tailored form design!
